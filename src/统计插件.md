# 快应用统计接入

标签（空格分隔）： 快应用

---

#快应用统计平台接入

## 下载SDK

    下载 SDK文件并解压，将其中的 appStatistics.min.js、statistics.config.js拷贝到app.ux同级的目录（src目录下）；

## 修改配置文件
    修改statistics.config.js，填入快应用包名；
    
![1.1.png-6.2kB][1]

## 接入SDK

app.ux 文件中引入SDK
```
    import APP_STATISTICS from "appStatistics.js"

``` 

## 依赖安装

```
 npm install --save-dev babel-preset-stage-3
 npm install --save md5

```
.babelrc 文件，增加预设

```

{
    "presets": [
        "env",
        "stage-3"
    ]
}

```


## 初始化打点


```
    //在app.ux的onCreate中增加统计打点代码：

    onCreate:function(){
        
        //统计打点
        APP_STATISTICS.app_sta_init( this );

        // 其他业务代码...

    },    
    onDestroy () {
        // 退出 app 打点
        APP_STATISTICS.app_destroy();              
    },    

```


## 依赖检查

- 内置模块依赖

    由于快应用部分内置模块 ,需要在manifest.json 的 features 属性中 声明才可以使用，所有需要检查依赖模块是否已经声明。SDK 使用到的内置模块： 
    
    storage (缓存)
    nativeFetch（网络请求）
    device（设备信息）
    geolocation （地理位置）
    network （网络信息）
    service.account (账号接口) 
 
- 依赖声明方式 

```
    // manifest.json 文件
    
    "features": [
        { "name": "system.fetch"},
        {"name": "system.storage"},
        {"name": "system.device"},
        {"name": "system.geolocation"},
        {"name": "system.network"},
        {"name": "service.account"},
    ]

    
```

## 接入完成
 - 确认完成以上步骤之后，就可以使用我们提供的统计功能啦。


[1]: http://static.zybuluo.com/koalasweet/dputnlpof773s9qjykq1oaxe/1.1.png